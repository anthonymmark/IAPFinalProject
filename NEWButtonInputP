// RUN USING SKETCH > PRESENT, IT'LL LOOK NICER ON YOUR CURTAIN :)
import processing.serial.*;
Serial myPort;
PFont font;
int numStories;
XML xml;
//String[] stories;
String allStories;
boolean mainMenu = true;
String[] cmd = {"C::\\Users\\Andrea Meister\\processing-2.2.1-windows64\\processing-2.2.1", "\\ShowerTimer.pde"};
//for hard-coded task list
String task3 = "Test Thursday at 7:30pm";
String task1 = "Practice Today at 5:00pm";
String task2 = "UROP meeting tomorrow at 2:00pm";

void setup(){
  //starting out stuff, connecting with serial
  size(displayWidth, displayHeight);
  //myPort = new Serial(this, Serial.list()[5], 9600);
  //myPort.bufferUntil('\n');
  //begin newsfeed work
  font = createFont("Arial",16,true);
  //sets number of stories
  numStories = 5;
  //Loads RSS feed and gets title + description of each item
  XML rss = loadXML("http://newsrss.bbc.co.uk/rss/newsonline_uk_edition/front_page/rss.xml");
  XML[] childrentitle = rss.getChildren("channel/item/title");
  XML[] childrendescrip = rss.getChildren("channel/item/description");
  //cycle through specified number of stories and create one string of title, descrip, line breaks
  allStories = "";
  for (int i = 0; i < numStories; i++) {
    String titlewtag = childrentitle[i].toString();
    int lengthh = titlewtag.length();
    String title = titlewtag.substring(7, lengthh-8);
    String descriptionwtag = childrendescrip[i].toString();
    int lengthhh = descriptionwtag.length();
    String description = descriptionwtag.substring(13, lengthhh-14);
    allStories = allStories + title + ", " + description + "\n"+"\n";
  }

  shower_time = 10;
  size(displayWidth, displayHeight);
  initial_second = second();
  initial_minute = minute();
}

//for Timer
float shower_time; //the user will input a time in minutes as their goal time for the shower
float increment;
float time_elapsed;
//shower_time and time_elapsed will be in minutes for the final product, 
//for demonstration purposes the times will be in seconds
float time_increment;
float initial_second;
float initial_minute;
float current_second;
float current_minute;
String time;
int water_color;

void draw(){
  timer();
  
  
/**  if(myPort.read() == 'A'){
    //news
    mainMenu = false;
    textFont(font,18);
    background(255,255,255);
    fill(0);
    text(allStories, 0, 0,displayWidth, displayHeight);
  }
  if(myPort.read() == 'B'){
    timer();
    
    mainMenu = false;
    //this may or may not work, figure out parameters for above
    
  }
  if(myPort.read() == 'C'){
    //2048
    mainMenu = false;
    background(0);
  }
  if(myPort.read() == 'D'){
    //tasklist
    mainMenu = false;
    background(255);
    fill(0);
    textSize(56);
    text(task1,150,300);
    text(task2,150,375);
    text(task3,150,450);
  }
  if(myPort.read() == 'E' && mainMenu == false){
    //main menu
    mainMenu = true;
    textFont(font,36);
    background(255,255,255);
    noFill();
    rect(0,0,displayWidth/2, displayHeight/2);
    rect(displayWidth/2, displayHeight/2,displayWidth/2, displayHeight/2);
    rect(displayWidth/2,0,displayWidth/2, displayHeight/2);
    rect(0,displayHeight/2,displayWidth/2, displayHeight/2);
    rect(0,0,115,30);
    fill(0);
    text("Games",displayWidth/6, displayHeight/4);
    text("Life",2*displayWidth/3, displayHeight/4);
    text("News",displayWidth/6, 3*displayHeight/4);
    text("Timer",2*displayWidth/3, 3*displayHeight/4);
    text("Power", 10,27);
  }
  if(myPort.read() == 'E' && mainMenu == true){
    background(0);
  
  }
**/
}
